# Каталог для исходных кодов модулей и подсистем Продукта

## Структура
- ../должна быть актуализирована
	
В случае внесения изменений в каталог данный файл должен быть актуализирован

## Общие требования
Имена классов должны начинаться с общего для всего проекта префикса. Имена классов не должны содержать глаголов. Все поля, имена классов, методов, аннотаций и др. (за исключением локальных переменных) должны быть осмысленными.
К именам абстрактных классов добавляется префикс A (после префикса проекта).
К именам реализаций интерфейсов добавляется постфикс Impl
Содержимое каждого класса(интерфейса, перечисления) должно включать в себя информацию о создателе и дате создания. Следует избегать редактирования файлов, созданных другим разработчиком. Информацию следует размещать в javadoc к объявлению.

Базовый пакет должен содержать следующие пакеты:
- config - классы конфигураций (@Configuration)
- controller - контроллеры
- domain - содержит пакеты
    - entity - сущности БД
        - [название источника] - если используется более одного источника данных, то сущности каждого из них следует разделить
    - dto - ДТО сущностей
- repository - репозитории приложения
    - [название источника] - если используется более одного источника данных, то репозитории каждого из них следует разделить
- service - интерфейсы сервисов, в котором
    - impl - реализации интерфейсов сервисов
- util - утильные классы (конвертеры, валидаторы и т.д.)
    - converter
        - attribute - конвертеры полей БД
        - model - конвертеры для Model Mapper
    - validator - реализации валидаторов
        - annotation - аннотации для валидаторов (constraint)

## Контроллеры
На контроллеры накладываются следующие ограничения:
- Метод контроллера принимает DTO и возвращает ResponseEntity
- В контроллере содержится преобразование из DTO в сущность (и наоборот) и вызов сервисов
- Контроллер не содержит репозиториев и бизнес-логики

## Сервисы
На сервисы накладываются следующие ограничения:
- Методы сервисов, которые работают с репозиторием, принимают и возвращают объект сущности (не DTO)
- Сервис не занимается конвертацией из DTO в сущность и наоборот
- Сервис занимается проверкой правильности (валидности) полученных и выбранных из базы данных.
- В случае ошибки в работе сервис выбрасывает исключение
- Каждый сервис должен быть представлен интерфейсом и реализацией, даже если реализация всего одна

## Исключения
На все приложение существует базовое исключение (билдер), которое обрабатывается в одном хендлере. Прочих исключений следует, по возможности, избегать; базовое исключение должно покрывать все возможные ошибки и их описания.
Сообщение об ошибке должно содержать:
- Код ошибки (по которой однозначно можно определить ошибку)
- Внутренний текст исключения
- Внешний текст исключения
- Таймстамп исключения

Коды ошибок должны быть определены заранее на уровне документации, одному коду соответствует одна ошибка. Коды ошибок могут дополняться в ходе разработки проекта, но не могут быть изменены после создания.


## Валидация
Параметры метода контроллера могут содержать аннотацию @Valid
DTO могут содержать валидируемые поля.
Если требуется написать собственную валидацию поля (constraint validation), на нее накладываются следующие ограничения:
- Валидатор должен работать только с этим полем
- Валидатор не должен обращаться к сервисам и репозиториям